var _={d:(n,t)=>{for(var u in t)_.o(t,u)&&!_.o(n,u)&&Object.defineProperty(n,u,{enumerable:!0,get:t[u]})},o:(_,n)=>Object.prototype.hasOwnProperty.call(_,n)},n={};_.d(n,{kr:()=>o,aI:()=>y,Xr:()=>d});const t=_=>{_.includes("Asset missing")||((_=>{let n=!1;_.includes("VSync => ON")&&(!0,o.onEmulatorStarted())})(_),console.warn(_))},{print:u,printErr:l}={print:t,printErr:t},e=(_,n,t)=>{!1===window.FS.analyzePath(n).exists&&window.FS.createPath("/",n,!0,!0),window.FS.writeFile(`${n}/${t}`,_)},i={rgui_show_start_screen:"false"},p={input_player1_start:"enter",input_player1_select:"space",input_player1_l:"e",input_player1_l2:"r",input_player1_r:"p",input_player1_r2:"o",input_player1_a:"h",input_player1_b:"g",input_player1_x:"y",input_player1_y:"t",input_player1_up:"up",input_player1_left:"left",input_player1_down:"down",input_player1_right:"right",input_player1_l_x_minus:"a",input_player1_l_x_plus:"d",input_player1_l_y_minus:"w",input_player1_l_y_plus:"s",input_player1_l3_btn:"x",input_player1_r_x_minus:"j",input_player1_r_x_plus:"l",input_player1_r_y_minus:"i",input_player1_r_y_plus:"k",input_player1_r3_btn:"comma",input_menu_toggle:"f1",input_save_state:"f2",input_load_state:"f3",input_screenshot:"f4",input_hold_fast_forward:"nul",input_toggle_fast_forward:"nul"},a={input_ai_service:"nul",input_ai_service_axis:"nul",input_ai_service_btn:"nul",input_ai_service_mbtn:"nul",input_audio_mute:"nul",input_audio_mute_axis:"nul",input_audio_mute_btn:"nul",input_audio_mute_mbtn:"nul",input_cheat_index_minus:"nul",input_cheat_index_minus_axis:"nul",input_cheat_index_minus_btn:"nul",input_cheat_index_minus_mbtn:"nul",input_cheat_index_plus:"nul",input_cheat_index_plus_axis:"nul",input_cheat_index_plus_btn:"nul",input_cheat_index_plus_mbtn:"nul",input_cheat_toggle:"nul",input_cheat_toggle_axis:"nul",input_cheat_toggle_btn:"nul",input_cheat_toggle_mbtn:"nul",input_desktop_menu_toggle:"nul",input_desktop_menu_toggle_axis:"nul",input_desktop_menu_toggle_btn:"nul",input_desktop_menu_toggle_mbtn:"nul",input_disk_eject_toggle:"nul",input_disk_eject_toggle_axis:"nul",input_disk_eject_toggle_btn:"nul",input_disk_eject_toggle_mbtn:"nul",input_disk_next:"nul",input_disk_next_axis:"nul",input_disk_next_btn:"nul",input_disk_next_mbtn:"nul",input_disk_prev:"nul",input_disk_prev_axis:"nul",input_disk_prev_btn:"nul",input_disk_prev_mbtn:"nul",input_duty_cycle:"nul",input_enable_hotkey:"nul",input_enable_hotkey_axis:"nul",input_enable_hotkey_btn:"nul",input_enable_hotkey_mbtn:"nul",input_exit_emulator:"nul",input_exit_emulator_axis:"nul",input_exit_emulator_btn:"nul",input_exit_emulator_mbtn:"nul",input_fps_toggle:"nul",input_fps_toggle_axis:"nul",input_fps_toggle_btn:"nul",input_fps_toggle_mbtn:"nul",input_frame_advance:"nul",input_frame_advance_axis:"nul",input_frame_advance_btn:"nul",input_frame_advance_mbtn:"nul",input_game_focus_toggle:"nul",input_game_focus_toggle_axis:"nul",input_game_focus_toggle_btn:"nul",input_game_focus_toggle_mbtn:"nul",input_grab_mouse_toggle:"nul",input_grab_mouse_toggle_axis:"nul",input_grab_mouse_toggle_btn:"nul",input_grab_mouse_toggle_mbtn:"nul",input_hold_fast_forward_axis:"nul",input_hold_fast_forward_btn:"nul",input_hold_fast_forward_mbtn:"nul",input_hold_slowmotion:"nul",input_slowmotion:"nul",input_hold_slowmotion_axis:"nul",input_hold_slowmotion_btn:"nul",input_hold_slowmotion_mbtn:"nul",input_hotkey_block_delay:"nul",input_load_state_axis:"nul",input_load_state_btn:"nul",input_load_state_mbtn:"nul",input_menu_toggle_axis:"nul",input_menu_toggle_btn:"nul",input_menu_toggle_mbtn:"nul",input_movie_record_toggle:"nul",input_movie_record_toggle_axis:"nul",input_movie_record_toggle_btn:"nul",input_movie_record_toggle_mbtn:"nul",input_netplay_game_watch:"nul",input_netplay_game_watch_axis:"nul",input_netplay_game_watch_btn:"nul",input_netplay_game_watch_mbtn:"nul",input_netplay_host_toggle:"nul",input_netplay_host_toggle_axis:"nul",input_netplay_host_toggle_btn:"nul",input_netplay_host_toggle_mbtn:"nul",input_osk_toggle:"nul",input_osk_toggle_axis:"nul",input_osk_toggle_btn:"nul",input_osk_toggle_mbtn:"nul",input_overlay_next:"nul",input_overlay_next_axis:"nul",input_overlay_next_btn:"nul",input_overlay_next_mbtn:"nul",input_pause_toggle:"nul",input_pause_toggle_axis:"nul",input_pause_toggle_btn:"nul",input_pause_toggle_mbtn:"nul",input_player1_a_axis:"nul",input_player1_a_btn:"nul",input_player1_a_mbtn:"nul",input_player1_b_axis:"nul",input_player1_b_btn:"nul",input_player1_b_mbtn:"nul",input_player1_down_axis:"nul",input_player1_down_btn:"nul",input_player1_down_mbtn:"nul",input_player1_gun_aux_a:"nul",input_player1_gun_aux_a_axis:"nul",input_player1_gun_aux_a_btn:"nul",input_player1_gun_aux_a_mbtn:"nul",input_player1_gun_aux_b:"nul",input_player1_gun_aux_b_axis:"nul",input_player1_gun_aux_b_btn:"nul",input_player1_gun_aux_b_mbtn:"nul",input_player1_gun_aux_c:"nul",input_player1_gun_aux_c_axis:"nul",input_player1_gun_aux_c_btn:"nul",input_player1_gun_aux_c_mbtn:"nul",input_player1_gun_dpad_down:"nul",input_player1_gun_dpad_down_axis:"nul",input_player1_gun_dpad_down_btn:"nul",input_player1_gun_dpad_down_mbtn:"nul",input_player1_gun_dpad_left:"nul",input_player1_gun_dpad_left_axis:"nul",input_player1_gun_dpad_left_btn:"nul",input_player1_gun_dpad_left_mbtn:"nul",input_player1_gun_dpad_right:"nul",input_player1_gun_dpad_right_axis:"nul",input_player1_gun_dpad_right_btn:"nul",input_player1_gun_dpad_right_mbtn:"nul",input_player1_gun_dpad_up:"nul",input_player1_gun_dpad_up_axis:"nul",input_player1_gun_dpad_up_btn:"nul",input_player1_gun_dpad_up_mbtn:"nul",input_player1_gun_offscreen_shot:"nul",input_player1_gun_offscreen_shot_axis:"nul",input_player1_gun_offscreen_shot_btn:"nul",input_player1_gun_offscreen_shot_mbtn:"nul",input_player1_gun_select:"nul",input_player1_gun_select_axis:"nul",input_player1_gun_select_btn:"nul",input_player1_gun_select_mbtn:"nul",input_player1_gun_start:"nul",input_player1_gun_start_axis:"nul",input_player1_gun_start_btn:"nul",input_player1_gun_start_mbtn:"nul",input_player1_gun_trigger:"nul",input_player1_gun_trigger_axis:"nul",input_player1_gun_trigger_btn:"nul",input_player1_gun_trigger_mbtn:"nul",input_player1_l2_axis:"nul",input_player1_l2_btn:"nul",input_player1_l2_mbtn:"nul",input_player1_l3:"nul",input_player1_l3_axis:"nul",input_player1_l3_mbtn:"nul",input_player1_l_axis:"nul",input_player1_l_btn:"nul",input_player1_l_mbtn:"nul",input_player1_l_x_minus_axis:"nul",input_player1_l_x_minus_btn:"nul",input_player1_l_x_minus_mbtn:"nul",input_player1_l_x_plus_axis:"nul",input_player1_l_x_plus_btn:"nul",input_player1_l_x_plus_mbtn:"nul",input_player1_l_y_minus_axis:"nul",input_player1_l_y_minus_btn:"nul",input_player1_l_y_minus_mbtn:"nul",input_player1_l_y_plus_axis:"nul",input_player1_l_y_plus_btn:"nul",input_player1_l_y_plus_mbtn:"nul",input_player1_left_axis:"nul",input_player1_left_mbtn:"nul",input_player1_r2_axis:"nul",input_player1_r2_btn:"nul",input_player1_r2_mbtn:"nul",input_player1_r3:"nul",input_player1_r3_axis:"nul",input_player1_r3_mbtn:"nul",input_player1_r_axis:"nul",input_player1_r_btn:"nul",input_player1_r_mbtn:"nul",input_player1_r_x_minus_axis:"nul",input_player1_r_x_minus_btn:"nul",input_player1_r_x_minus_mbtn:"nul",input_player1_r_x_plus_axis:"nul",input_player1_r_x_plus_btn:"nul",input_player1_r_x_plus_mbtn:"nul",input_player1_r_y_minus_axis:"nul",input_player1_r_y_minus_btn:"nul",input_player1_r_y_minus_mbtn:"nul",input_player1_r_y_plus_axis:"nul",input_player1_r_y_plus_btn:"nul",input_player1_r_y_plus_mbtn:"nul",input_player1_right_axis:"nul",input_player1_right_mbtn:"nul",input_player1_select_axis:"nul",input_player1_select_btn:"nul",input_player1_select_mbtn:"nul",input_player1_start_axis:"nul",input_player1_start_btn:"nul",input_player1_start_mbtn:"nul",input_player1_turbo:"nul",input_player1_turbo_axis:"nul",input_player1_turbo_btn:"nul",input_player1_turbo_mbtn:"nul",input_player1_up_axis:"nul",input_player1_up_btn:"nul",input_player1_up_mbtn:"nul",input_player1_x_axis:"nul",input_player1_x_btn:"nul",input_player1_x_mbtn:"nul",input_player1_y_axis:"nul",input_player1_y_btn:"nul",input_player1_y_mbtn:"nul",input_poll_type_behavior:"nul",input_recording_toggle:"nul",input_recording_toggle_axis:"nul",input_recording_toggle_btn:"nul",input_recording_toggle_mbtn:"nul",input_reset:"nul",input_reset_axis:"nul",input_reset_btn:"nul",input_reset_mbtn:"nul",input_rewind:"nul",input_rewind_axis:"nul",input_rewind_btn:"nul",input_rewind_mbtn:"nul",input_save_state_axis:"nul",input_save_state_btn:"nul",input_save_state_mbtn:"nul",input_screenshot_axis:"nul",input_screenshot_btn:"nul",input_screenshot_mbtn:"nul",input_send_debug_info:"nul",input_send_debug_info_axis:"nul",input_send_debug_info_btn:"nul",input_send_debug_info_mbtn:"nul",input_shader_next:"nul",input_shader_next_axis:"nul",input_shader_next_btn:"nul",input_shader_next_mbtn:"nul",input_shader_prev:"nul",input_shader_prev_axis:"nul",input_shader_prev_btn:"nul",input_shader_prev_mbtn:"nul",input_state_slot_decrease:"nul",input_state_slot_decrease_axis:"nul",input_state_slot_decrease_btn:"nul",input_state_slot_decrease_mbtn:"nul",input_state_slot_increase:"nul",input_state_slot_increase_axis:"nul",input_state_slot_increase_btn:"nul",input_state_slot_increase_mbtn:"nul",input_streaming_toggle:"nul",input_streaming_toggle_axis:"nul",input_streaming_toggle_btn:"nul",input_streaming_toggle_mbtn:"nul",input_toggle_fast_forward_axis:"nul",input_toggle_fast_forward_btn:"nul",input_toggle_fast_forward_mbtn:"nul",input_toggle_fullscreen:"nul",input_toggle_fullscreen_axis:"nul",input_toggle_fullscreen_btn:"nul",input_toggle_fullscreen_mbtn:"nul",input_toggle_slowmotion:"nul",input_toggle_slowmotion_axis:"nul",input_toggle_slowmotion_btn:"nul",input_toggle_slowmotion_mbtn:"nul",input_turbo_default_button:"nul",input_turbo_mode:"nul",input_turbo_period:"nul",input_volume_down:"nul",input_volume_down_axis:"nul",input_volume_down_btn:"nul",input_volume_down_mbtn:"nul",input_volume_up:"nul",input_volume_up_axis:"nul",input_volume_up_btn:"nul",input_volume_up_mbtn:"nul"},r=new class{constructor(){this.promise=new Promise(((_,n)=>{this.reject=n,this.resolve=_}))}},s=()=>r.resolve();class o{static async prepare(_,n){var t;((_,n)=>{window.Module={canvas:_,noInitialRun:!0,arguments:["/rom.bin","--verbose"],onRuntimeInitialized:n,print:u,printErr:l,preRun:[],postRun:[]}})(_,s),await(async _=>{const n=`https://cdn.statically.io/gh/dimitrikarpov/holy-retroarch@master/cores/${_}_libretro.js`;return new Promise(((_,t)=>{if(!Boolean(document.querySelector(`[src="${n}"`)))try{const u=document.createElement("script");u.type="application/javascript",u.src=n,u.addEventListener("load",_),u.addEventListener("error",t),document.body.appendChild(u)}catch(_){t(_)}}))})(n),await r.promise,e((t={...p,...i,...a},Object.entries(t).reduce(((_,[n,t])=>`${_}${n} = "${t}"\n`),"")),"home/web_user/retroarch/userdata","retroarch.cfg")}static uploadSave(_){e(_,"home/web_user/retroarch/userdata/states","rom.state")}static uploadRom(_){e(_,"/","rom.bin")}static start(){window.Module.callMain(window.Module.arguments),window.Module.resumeMainLoop(),document.getElementById("canvas").focus()}static loadSave(){window.Module_cmd_load_state()}static onEmulatorStarted(){console.log("[Retroarch Service]: emulator started")}}class g extends HTMLElement{constructor(){super(),this.retroarchService=o}connectedCallback(){this.innerHTML='<canvas id="canvas"></canvas>',this.$canvas=this.querySelector("canvas"),this.core=this.getAttribute("core"),o.prepare(this.$canvas,this.core)}disconnectedCallback(){}}const y=async _=>{const n=await _.arrayBuffer();return new Uint8Array(n)},m=(_=1e3)=>new Promise((n=>{setTimeout(n,_)})),d=async({container:_,rom:n,savestate:t,onStarted:u,core:l})=>{u&&(o.onEmulatorStarted=u);const e=(_=>{let n=_;return _||(n=document.createElement("div"),document.body.appendChild(n)),n.innerHTML='<canvas id="canvas"></canvas>',n.querySelector("canvas")})(_);return await o.prepare(e,l),n&&t?(o.uploadRom(n),o.uploadSave(t),await m(250),o.start()):n&&(o.uploadRom(n),await m(250),o.start()),o};customElements.get("holy-retroarch")||customElements.define("holy-retroarch",g);var b=n.kr,c=n.aI,x=n.Xr;export{b as RetroarchService,c as convertFileToUint8Array,x as createRetroarch};